import{r as s,j as e}from"./index-DIzydVhA.js";import{g as w,a as v}from"./helpCenterService-IPHEGUwt.js";import{L as S}from"./LoadingSpinner-BQulzYF6.js";const I=({currentUser:a,onNavigate:p})=>{const[n,g]=s.useState([]),[h,r]=s.useState(!0),[i,c]=s.useState(!1),[o,d]=s.useState(""),[u,m]=s.useState(""),[x,l]=s.useState(!1),b=async()=>{r(!0);const t=await w(a.username);g(t.sort((y,N)=>new Date(N.createdAt).getTime()-new Date(y.createdAt).getTime())),r(!1)};s.useEffect(()=>{b()},[a.username]);const f=async t=>{if(t.preventDefault(),l(!0),a.type==="admin"){alert("Admin accounts cannot create support tickets."),l(!1);return}await v({userId:a.username,userType:a.type,subject:o,message:u}),d(""),m(""),c(!1),l(!1),b()},j=t=>{switch(t){case"Open":return"bg-blue-500/20 text-blue-300";case"In Progress":return"bg-yellow-500/20 text-yellow-300";case"Closed":return"bg-red-500/20 text-red-300"}};return e.jsx("section",{className:"py-24 bg-slate-900 animate-fadeIn min-h-[80vh]",children:e.jsxs("div",{className:"container mx-auto px-6 max-w-4xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold !text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500",children:"Help Center"}),e.jsx("button",{onClick:()=>c(t=>!t),className:"bg-cyan-500 text-white px-5 py-2.5 rounded-lg hover:bg-cyan-400 font-semibold",children:i?"Cancel":"Create New Ticket"})]}),i&&e.jsx("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 mb-8",children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Submit a new request"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"subject",className:"block text-slate-300 mb-1",children:"Subject"}),e.jsx("input",{id:"subject",type:"text",value:o,onChange:t=>d(t.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"message",className:"block text-slate-300 mb-1",children:"How can we help?"}),e.jsx("textarea",{id:"message",value:u,onChange:t=>m(t.target.value),rows:5,required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsx("button",{type:"submit",disabled:x,className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400 disabled:bg-slate-600",children:x?"Submitting...":"Submit Ticket"})]})}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold p-6",children:"My Support Tickets"}),h?e.jsx("div",{className:"py-8",children:e.jsx(S,{})}):e.jsx("div",{className:"space-y-2 p-6 pt-0",children:n.length>0?n.map(t=>e.jsxs("button",{onClick:()=>p(`/help/${t.id}`),className:"w-full text-left bg-slate-800 p-4 rounded-lg hover:bg-slate-700 transition-colors flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.subject}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Created: ",new Date(t.createdAt).toLocaleDateString()]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${j(t.status)}`,children:t.status})]},t.id)):e.jsx("p",{className:"text-slate-400 text-center py-4",children:"You have no support tickets."})})]})]})})};export{I as default};
