import{j as e,r as a,b as O,g as Z,s as Q,a as ee,c as te,d as se,e as ae,f as le,h as ne}from"./index-DIzydVhA.js";import{g as $,s as re}from"./telehealthService-BrJQz6d6.js";import{g as G,s as V}from"./blogService-B4VK8t9G.js";import{R as ie}from"./RichTextEditor-BrE2tSya.js";import{g as H}from"./geminiService-D3ylRyWO.js";import{S as B,X as ce}from"./IconComponents-CQvE_25E.js";import{g as oe,s as de}from"./bookingService-sD1vuPFy.js";import{L as z}from"./LoadingSpinner-BQulzYF6.js";import"./html-D3brqi0s.js";const K=({title:t,data:s})=>{if(!s||s.length===0)return e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg h-full",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:t}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-slate-400",children:"No data available."})})]});const d=Math.max(...s.map(b=>b.value),1),i=250,n=40,p=15,c=s.length*(n+p);return e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:t}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("svg",{width:c,height:i,"aria-labelledby":"title",role:"img",children:[e.jsx("title",{id:"title",children:t}),e.jsx("g",{children:s.map((b,v)=>{const N=b.value/d*(i-40),x=v*(n+p),l=i-N-20;return e.jsxs("g",{className:"bar-group",children:[e.jsxs("rect",{x,y:l,width:n,height:N,className:"fill-cyan-500",rx:"4",ry:"4",children:[e.jsx("animate",{attributeName:"height",from:"0",to:N,dur:"0.5s",fill:"freeze"}),e.jsx("animate",{attributeName:"y",from:i-20,to:l,dur:"0.5s",fill:"freeze"})]}),e.jsx("text",{x:x+n/2,y:l-5,textAnchor:"middle",className:"fill-white font-semibold text-sm",children:b.value}),e.jsx("text",{x:x+n/2,y:i,textAnchor:"middle",className:"fill-slate-300 text-xs",children:b.label})]},v)})})]})})]})},ue=({title:t,data:s})=>{const d=s.reduce((c,b)=>c+b.value,0);if(d===0)return e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg h-full",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:t}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-slate-400",children:"No data available."})})]});const i=60,n=2*Math.PI*i;let p=-90;return e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg h-full",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:t}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-6",children:[e.jsx("div",{className:"relative",children:e.jsxs("svg",{width:"160",height:"160",viewBox:"0 0 160 160","aria-labelledby":"title",role:"img",children:[e.jsx("title",{id:"title",children:t}),e.jsx("circle",{cx:"80",cy:"80",r:i,className:"stroke-slate-600",strokeWidth:"20",fill:"transparent"}),s.map((c,b)=>{if(c.value===0)return null;const v=c.value/d*100,N=`${n*v/100} ${n}`,x=p;return p+=360*v/100,e.jsx("circle",{cx:"80",cy:"80",r:i,stroke:c.color||"#22d3ee",strokeWidth:"20",fill:"transparent",strokeDasharray:N,transform:`rotate(${x} 80 80)`,children:e.jsx("animate",{attributeName:"stroke-dasharray",from:`0 ${n}`,to:N,dur:"1s",fill:"freeze"})},b)}),e.jsx("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-white text-2xl font-bold",children:d}),e.jsx("text",{x:"50%",y:"65%",dominantBaseline:"middle",textAnchor:"middle",className:"fill-slate-400 text-xs",children:"Total"})]})}),e.jsx("div",{className:"legend space-y-2",children:s.map((c,b)=>e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"h-3 w-3 rounded-full mr-2",style:{backgroundColor:c.color||"#22d3ee"}}),e.jsxs("span",{className:"text-slate-300",children:[c.label,":"]}),e.jsx("span",{className:"font-semibold text-white ml-1",children:c.value})]},b))})]})]})},me="nprc-chat-history",xe=t=>{const s=["knee","back","shoulder","neck","hip","ankle","wrist","elbow"],d={};return s.forEach(i=>d[i]=0),t.forEach(i=>{if(i.role==="user"){const n=i.content.toLowerCase();s.forEach(p=>{n.includes(p)&&d[p]++})}}),Object.entries(d).map(([i,n])=>({label:i.charAt(0).toUpperCase()+i.slice(1),value:n})).sort((i,n)=>n.value-i.value).filter(i=>i.value>0)},he=t=>{const s={Scheduled:0,Completed:0,Cancelled:0};return t.forEach(d=>{d.status in s&&s[d.status]++}),[{label:"Scheduled",value:s.Scheduled,color:"#22d3ee"},{label:"Completed",value:s.Completed,color:"#34d399"},{label:"Cancelled",value:s.Cancelled,color:"#f87171"}]},ge=t=>{const s={};return t.forEach(d=>{const i=new Date(d.date),n=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth())).toISOString();s[n]?s[n]++:s[n]=1}),Object.entries(s).sort(([d],[i])=>new Date(d).getTime()-new Date(i).getTime()).map(([d,i])=>({label:new Date(d).toLocaleString("default",{month:"short",year:"2-digit",timeZone:"UTC"}),value:i}))},pe=()=>{const[t,s]=a.useState([]),[d,i]=a.useState([]),[n,p]=a.useState([]),[c,b]=a.useState([]),[v,N]=a.useState(!0);a.useEffect(()=>{(async()=>{N(!0);try{const m=localStorage.getItem(me),S=m?JSON.parse(m):[];s(S),b(xe(S))}catch(m){console.error("Failed to load chat history:",m)}const j=await $();i(he(j)),p(ge(j)),N(!1)})()},[]);const x=t.length,l=t.filter(h=>h.role==="user").length,f=t.filter(h=>h.role==="model").length;return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700 animate-fadeIn",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Activity Dashboard"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg text-center",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Total Messages"}),e.jsx("p",{className:"text-3xl font-bold text-cyan-400",children:x})]}),e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg text-center",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"User Messages"}),e.jsx("p",{className:"text-3xl font-bold",children:l})]}),e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg text-center",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"AI Responses"}),e.jsx("p",{className:"text-3xl font-bold",children:f})]})]}),v?e.jsx("p",{className:"text-slate-400 text-center py-8",children:"Loading chart data..."}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ue,{title:"Telehealth Session Status",data:d})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx(K,{title:"Monthly Session Volume",data:n})}),e.jsx("div",{className:"lg:col-span-5",children:e.jsx(K,{title:"Common User Inquiry Topics",data:c})})]})]})},R=t=>t.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),be=()=>{const[t,s]=a.useState([]),[d,i]=a.useState(!1),[n,p]=a.useState(null),[c,b]=a.useState(!0),[v,N]=a.useState(""),[x,l]=a.useState(""),[f,h]=a.useState(""),[j,m]=a.useState(""),[S,y]=a.useState(""),[C,k]=a.useState(""),[A,P]=a.useState(""),[E,F]=a.useState(!1);a.useEffect(()=>{(async()=>{b(!0);const T=await G();s(T),b(!1)})()},[]);const I=async u=>{s(u),await V(u)},M=()=>{N(""),l(""),h(""),m(""),y(""),k(""),P("")},r=u=>{p(u),N(u.title),l(u.content),h(u.author),m(u.slug),y(u.metaTitle),k(u.metaDescription),P(u.metaKeywords),i(!0)},o=async u=>{if(window.confirm("Are you sure you want to delete this post?")){const T=t.filter(U=>U.id!==u);await I(T)}},w=()=>{p(null),M(),i(!0)},D=()=>{i(!1),p(null)},q=async u=>{u.preventDefault();const T={title:v,content:x,author:f,slug:j||R(v),metaTitle:S||v,metaDescription:C,metaKeywords:A};let U;n?U=t.map(W=>W.id===n.id?{...W,...T}:W):U=[{id:Date.now().toString(),date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),...T},...t],await I(U),i(!1)},g=u=>{const T=u.target.value;N(T),n||m(R(T))},L=async()=>{if(!x){alert("Please add some content to the blog post before generating SEO meta tags.");return}F(!0);try{const u=await H(x);k(u.description),P(u.keywords)}catch(u){console.error("Failed to generate meta description:",u),alert("An error occurred while generating meta tags. Please try again.")}finally{F(!1)}};return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Blog Management"}),!d&&e.jsx("button",{onClick:w,className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:"Add New Post"})]}),d?e.jsxs("form",{onSubmit:q,className:"space-y-4 bg-slate-700/50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold",children:n?"Edit Post":"Create New Post"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-slate-300 mb-1",children:"Title"}),e.jsx("input",{id:"title",type:"text",value:v,onChange:g,required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"slug",className:"block text-slate-300 mb-1",children:"Slug (URL)"}),e.jsx("input",{id:"slug",type:"text",value:j,onChange:u=>m(u.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"author",className:"block text-slate-300 mb-1",children:"Author"}),e.jsx("input",{id:"author",type:"text",value:f,onChange:u=>h(u.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block text-slate-300 mb-1",children:"Content"}),e.jsx(ie,{value:x,onChange:l})]}),e.jsx("h3",{className:"text-lg font-semibold pt-4 border-t border-slate-600",children:"SEO Settings"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metaTitle",className:"block text-slate-300 mb-1",children:"Meta Title"}),e.jsx("input",{id:"metaTitle",type:"text",value:S,onChange:u=>y(u.target.value),placeholder:"Defaults to post title",className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{htmlFor:"metaDescription",className:"block text-slate-300",children:"Meta Description"}),e.jsxs("button",{type:"button",onClick:L,disabled:E||!x,className:"flex items-center gap-1 text-xs text-cyan-400 hover:text-cyan-300 disabled:opacity-50 disabled:cursor-not-allowed",title:"Generate with AI",children:[e.jsx(B,{className:`h-4 w-4 ${E?"animate-spin":""}`}),E?"Generating...":"Auto-generate"]})]}),e.jsx("textarea",{id:"metaDescription",value:C,onChange:u=>k(u.target.value),rows:3,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"metaKeywords",className:"block text-slate-300 mb-1",children:"Meta Keywords (comma-separated)"}),e.jsx("input",{id:"metaKeywords",type:"text",value:A,onChange:u=>P(u.target.value),className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:n?"Update Post":"Save Post"}),e.jsx("button",{type:"button",onClick:D,className:"bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-500",children:"Cancel"})]})]}):e.jsx("div",{className:"space-y-4",children:c?e.jsx("p",{className:"text-slate-400 text-center py-4",children:"Loading posts..."}):t.length>0?t.map(u=>e.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:u.title}),e.jsxs("p",{className:"text-sm text-slate-400",children:["By ",u.author," on ",u.date]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["/",u.slug]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>r(u),className:"font-semibold text-cyan-400 hover:text-cyan-300",children:"Edit"}),e.jsx("button",{onClick:()=>o(u.id),className:"font-semibold text-red-400 hover:text-red-300",children:"Delete"})]})]},u.id)):e.jsx("p",{className:"text-slate-400 text-center py-4",children:'No blog posts found. Click "Add New Post" to get started.'})})]})},fe=()=>{const[t,s]=a.useState([]),[d,i]=a.useState([]),[n,p]=a.useState(!1),[c,b]=a.useState(null),[v,N]=a.useState(!0),[x,l]=a.useState(""),[f,h]=a.useState(""),[j,m]=a.useState(""),[S,y]=a.useState("Scheduled"),[C,k]=a.useState(""),[A,P]=a.useState("");a.useEffect(()=>{(async()=>{N(!0);const[L,u]=await Promise.all([$(),O()]);s(L),i(u),u.length>0&&P(u[0].id),N(!1)})()},[]);const E=async g=>{s(g),await re(g)},F=()=>{l(""),h(""),m(""),y("Scheduled"),k(""),P(d.length>0?d[0].id:"")},I=g=>{b(g),l(g.patientName),h(g.date),m(g.time),y(g.status),k(g.notes||""),P(g.clinicianId),p(!0)},M=async g=>{if(window.confirm("Are you sure you want to delete this session?")){const L=t.filter(u=>u.id!==g);await E(L)}},r=()=>{b(null),F(),p(!0)},o=()=>{p(!1),b(null)},w=async g=>{if(g.preventDefault(),!A){alert("Please select a clinician.");return}const L={patientName:x,date:f,time:j,status:S,notes:C,clinicianId:A};let u;c?u=t.map(T=>T.id===c.id?{...T,...L}:T):u=[{id:Date.now().toString(),...L},...t],await E(u),p(!1)},D=g=>{switch(g){case"Scheduled":return"bg-blue-500/20 text-blue-300";case"Completed":return"bg-green-500/20 text-green-300";case"Cancelled":return"bg-red-500/20 text-red-300"}},q=g=>{var L;return((L=d.find(u=>u.id===g))==null?void 0:L.username)||"Unknown"};return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Telehealth Management"}),!n&&e.jsx("button",{onClick:r,className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:"Schedule New Session"})]}),n?e.jsxs("form",{onSubmit:w,className:"space-y-4 bg-slate-700/50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold",children:c?"Edit Session":"Schedule New Session"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"patientName",className:"block text-slate-300 mb-1",children:"Patient Name"}),e.jsx("input",{id:"patientName",type:"text",value:x,onChange:g=>l(g.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clinician",className:"block text-slate-300 mb-1",children:"Clinician"}),e.jsx("select",{id:"clinician",value:A,onChange:g=>P(g.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none",children:d.map(g=>e.jsx("option",{value:g.id,children:g.username},g.id))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"block text-slate-300 mb-1",children:"Date"}),e.jsx("input",{id:"date",type:"date",value:f,onChange:g=>h(g.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"time",className:"block text-slate-300 mb-1",children:"Time"}),e.jsx("input",{id:"time",type:"time",value:j,onChange:g=>m(g.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-slate-300 mb-1",children:"Status"}),e.jsxs("select",{id:"status",value:S,onChange:g=>y(g.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none",children:[e.jsx("option",{children:"Scheduled"}),e.jsx("option",{children:"Completed"}),e.jsx("option",{children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"notes",className:"block text-slate-300 mb-1",children:"Notes (optional)"}),e.jsx("textarea",{id:"notes",value:C,onChange:g=>k(g.target.value),rows:4,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:c?"Update Session":"Save Session"}),e.jsx("button",{type:"button",onClick:o,className:"bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-500",children:"Cancel"})]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-700/50 text-sm uppercase text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Patient"}),e.jsx("th",{className:"p-3",children:"Date & Time"}),e.jsx("th",{className:"p-3",children:"Clinician"}),e.jsx("th",{className:"p-3",children:"Status"}),e.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6 text-slate-400",children:"Loading sessions..."})}):t.length>0?t.map(g=>e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("td",{className:"p-3 font-medium",children:g.patientName}),e.jsxs("td",{className:"p-3 text-slate-400",children:[g.date," at ",g.time]}),e.jsx("td",{className:"p-3 text-slate-400",children:q(g.clinicianId)}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${D(g.status)}`,children:g.status})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx("button",{onClick:()=>I(g),className:"font-semibold text-cyan-400 hover:text-cyan-300",children:"Edit"}),e.jsx("button",{onClick:()=>M(g.id),className:"font-semibold text-red-400 hover:text-red-300",children:"Delete"})]})})]},g.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6 text-slate-400",children:"No telehealth sessions scheduled."})})})]})})]})},J="nprc-treatment-plans",je=()=>[{id:"tp1",patientName:"John Doe",condition:"Lower Back Pain",goals:"Reduce pain by 50% in 2 weeks, improve flexibility.",exercises:[{name:"Cat-Cow Stretch",sets:2,reps:10,frequency:"Daily"},{name:"Pelvic Tilts",sets:3,reps:15,frequency:"Daily"}]},{id:"tp2",patientName:"Jane Smith",condition:"Rotator Cuff Strain",goals:"Regain full range of motion in 4 weeks.",exercises:[{name:"Pendulum Swings",sets:2,reps:20,frequency:"Twice Daily"},{name:"Wall Push-ups",sets:3,reps:10,frequency:"3 times a week"}]}],Ne=async()=>{console.log("Simulating API call: getTreatmentPlans"),await new Promise(s=>setTimeout(s,200));try{const s=localStorage.getItem(J);if(s){const d=JSON.parse(s);if(Array.isArray(d)&&d.length>0)return d}}catch(s){console.error("Failed to load treatment plans from localStorage:",s)}const t=je();return await Y(t),t},Y=async t=>{console.log("Simulating API call: saveTreatmentPlans"),await new Promise(s=>setTimeout(s,200));try{localStorage.setItem(J,JSON.stringify(t))}catch(s){console.error("Failed to save treatment plans to localStorage:",s)}},ye=()=>{const[t,s]=a.useState([]),[d,i]=a.useState(!1),[n,p]=a.useState(null),[c,b]=a.useState(!0),[v,N]=a.useState(""),[x,l]=a.useState(""),[f,h]=a.useState(""),[j,m]=a.useState([]);a.useEffect(()=>{(async()=>{b(!0);const o=await Ne();s(o),b(!1)})()},[]);const S=async r=>{s(r),await Y(r)},y=()=>{N(""),l(""),h(""),m([]),p(null)},C=r=>{p(r),N(r.patientName),l(r.condition),h(r.goals),m(r.exercises),i(!0)},k=async r=>{if(window.confirm("Are you sure you want to delete this treatment plan?")){const o=t.filter(w=>w.id!==r);await S(o)}},A=()=>{y(),i(!0)},P=()=>{i(!1),y()},E=async r=>{r.preventDefault();const o={patientName:v,condition:x,goals:f,exercises:j};let w;n?w=t.map(D=>D.id===n.id?{...D,...o}:D):w=[{id:Date.now().toString(),...o},...t],await S(w),i(!1),y()},F=(r,o,w)=>{const D=[...j];D[r][o]=w,m(D)},I=()=>{m([...j,{name:"",sets:3,reps:10,frequency:""}])},M=r=>{m(j.filter((o,w)=>w!==r))};return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Treatment Plan Management"}),!d&&e.jsx("button",{onClick:A,className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:"Create New Plan"})]}),d?e.jsxs("form",{onSubmit:E,className:"space-y-6 bg-slate-700/50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold",children:n?"Edit Plan":"Create New Plan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tp-patientName",className:"block text-slate-300 mb-1",children:"Patient Name"}),e.jsx("input",{id:"tp-patientName",type:"text",value:v,onChange:r=>N(r.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tp-condition",className:"block text-slate-300 mb-1",children:"Condition"}),e.jsx("input",{id:"tp-condition",type:"text",value:x,onChange:r=>l(r.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tp-goals",className:"block text-slate-300 mb-1",children:"Goals"}),e.jsx("textarea",{id:"tp-goals",value:f,onChange:r=>h(r.target.value),rows:3,required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Exercises"}),e.jsx("div",{className:"space-y-3",children:j.map((r,o)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center bg-slate-600/50 p-2 rounded",children:[e.jsx("input",{type:"text",placeholder:"Name",value:r.name,onChange:w=>F(o,"name",w.target.value),className:"col-span-4 bg-slate-700 rounded p-1 text-sm"}),e.jsx("input",{type:"number",placeholder:"Sets",value:r.sets,onChange:w=>F(o,"sets",parseInt(w.target.value)||0),className:"col-span-1 bg-slate-700 rounded p-1 text-sm"}),e.jsx("input",{type:"number",placeholder:"Reps",value:r.reps,onChange:w=>F(o,"reps",parseInt(w.target.value)||0),className:"col-span-1 bg-slate-700 rounded p-1 text-sm"}),e.jsx("input",{type:"text",placeholder:"Frequency",value:r.frequency,onChange:w=>F(o,"frequency",w.target.value),className:"col-span-5 bg-slate-700 rounded p-1 text-sm"}),e.jsx("button",{type:"button",onClick:()=>M(o),className:"col-span-1 text-red-400 hover:text-red-300",children:e.jsx(ce,{className:"h-5 w-5 mx-auto"})})]},o))}),e.jsx("button",{type:"button",onClick:I,className:"mt-3 text-sm text-cyan-400 hover:text-cyan-300 font-semibold",children:"+ Add Exercise"})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t border-slate-600",children:[e.jsx("button",{type:"submit",className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:n?"Update Plan":"Save Plan"}),e.jsx("button",{type:"button",onClick:P,className:"bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-500",children:"Cancel"})]})]}):e.jsx("div",{className:"space-y-4",children:c?e.jsx("p",{className:"text-slate-400 text-center py-4",children:"Loading plans..."}):t.map(r=>e.jsx("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg",children:[r.patientName," - ",e.jsx("span",{className:"text-cyan-400",children:r.condition})]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Goals: ",r.goals]})]}),e.jsxs("div",{className:"flex gap-4 flex-shrink-0 ml-4",children:[e.jsx("button",{onClick:()=>C(r),className:"font-semibold text-cyan-400 hover:text-cyan-300",children:"Edit"}),e.jsx("button",{onClick:()=>k(r.id),className:"font-semibold text-red-400 hover:text-red-300",children:"Delete"})]})]})},r.id))})]})},_="nprc-workshops",ve=()=>[{id:"1",title:"Mastering Your Mobility: A Deep Dive into Joint Health",description:"Learn key exercises and lifestyle changes to improve joint mobility and reduce pain. Perfect for all ages.",date:"2024-09-15",time:"18:00",instructor:"Dr. Purab Sinha",registrationLink:"#contact"},{id:"2",title:"Desk Worker's Guide to a Pain-Free Back",description:"Combat the negative effects of prolonged sitting with our expert-led workshop on posture, ergonomics, and simple desk exercises.",date:"2024-09-22",time:"19:00",instructor:"Dr. Tarique Akhtar",registrationLink:"#contact"}],we=async()=>{console.log("Simulating API call: getWorkshops"),await new Promise(s=>setTimeout(s,200));try{const s=localStorage.getItem(_);if(s){const d=JSON.parse(s);if(Array.isArray(d)&&d.length>0)return d}}catch(s){console.error("Failed to load workshops from localStorage:",s)}const t=ve();return await X(t),t},X=async t=>{console.log("Simulating API call: saveWorkshops"),await new Promise(s=>setTimeout(s,200));try{localStorage.setItem(_,JSON.stringify(t))}catch(s){console.error("Failed to save workshops to localStorage:",s)}};function Se(){const[t,s]=a.useState([]),[d,i]=a.useState(!1),[n,p]=a.useState(null),[c,b]=a.useState(!0),[v,N]=a.useState(""),[x,l]=a.useState(""),[f,h]=a.useState(""),[j,m]=a.useState(""),[S,y]=a.useState(""),[C,k]=a.useState("");a.useEffect(()=>{(async()=>{b(!0);const w=await we();s(w),b(!1)})()},[]);const A=async o=>{s(o),await X(o)},P=()=>{N(""),l(""),h(""),m(""),y(""),k(""),p(null)},E=o=>{p(o),N(o.title),l(o.description),h(o.date),m(o.time),y(o.instructor),k(o.registrationLink),i(!0)},F=async o=>{if(window.confirm("Are you sure you want to delete this workshop?")){const w=t.filter(D=>D.id!==o);await A(w)}},I=()=>{P(),i(!0)},M=()=>{i(!1),P()},r=async o=>{o.preventDefault();const w={title:v,description:x,date:f,time:j,instructor:S,registrationLink:C};let D;n?D=t.map(q=>q.id===n.id?{...q,...w}:q):D=[{id:Date.now().toString(),...w},...t],await A(D),i(!1),P()};return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Workshop Management"}),!d&&e.jsx("button",{onClick:I,className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:"Add New Workshop"})]}),d?e.jsxs("form",{onSubmit:r,className:"space-y-4 bg-slate-700/50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold",children:n?"Edit Workshop":"Create New Workshop"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ws-title",className:"block text-slate-300 mb-1",children:"Title"}),e.jsx("input",{id:"ws-title",type:"text",value:v,onChange:o=>N(o.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ws-date",className:"block text-slate-300 mb-1",children:"Date"}),e.jsx("input",{id:"ws-date",type:"date",value:f,onChange:o=>h(o.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ws-time",className:"block text-slate-300 mb-1",children:"Time"}),e.jsx("input",{id:"ws-time",type:"time",value:j,onChange:o=>m(o.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ws-instructor",className:"block text-slate-300 mb-1",children:"Instructor"}),e.jsx("input",{id:"ws-instructor",type:"text",value:S,onChange:o=>y(o.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ws-desc",className:"block text-slate-300 mb-1",children:"Description"}),e.jsx("textarea",{id:"ws-desc",value:x,onChange:o=>l(o.target.value),rows:4,required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ws-link",className:"block text-slate-300 mb-1",children:"Registration Link"}),e.jsx("input",{id:"ws-link",type:"url",value:C,onChange:o=>k(o.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:n?"Update Workshop":"Save Workshop"}),e.jsx("button",{type:"button",onClick:M,className:"bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-500",children:"Cancel"})]})]}):e.jsx("div",{className:"space-y-4",children:c?e.jsx("p",{className:"text-slate-400 text-center py-4",children:"Loading workshops..."}):t.map(o=>e.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:o.title}),e.jsxs("p",{className:"text-sm text-slate-400",children:[o.date," at ",o.time," - by ",o.instructor]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>E(o),className:"font-semibold text-cyan-400 hover:text-cyan-300",children:"Edit"}),e.jsx("button",{onClick:()=>F(o.id),className:"font-semibold text-red-400 hover:text-red-300",children:"Delete"})]})]},o.id))})]})}const Ce="nprc-feedback",ke=async()=>{console.log("Simulating API call: getFeedback"),await new Promise(t=>setTimeout(t,200));try{const t=localStorage.getItem(Ce);if(t){const s=JSON.parse(t);if(Array.isArray(s))return s}}catch(t){console.error("Failed to load feedback from localStorage:",t)}return[]},Pe=()=>{const[t,s]=a.useState([]),[d,i]=a.useState(!0);a.useEffect(()=>{(async()=>{i(!0);const b=await ke();s(b),i(!1)})()},[]);const n=c=>{switch(c){case"Helpful":return"bg-green-500/20 text-green-300";case"Neutral":return"bg-yellow-500/20 text-yellow-300";case"Unhelpful":return"bg-red-500/20 text-red-300"}},p=c=>new Date(c).toLocaleString("en-US",{dateStyle:"medium",timeStyle:"short"});return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"User Feedback"}),e.jsx("div",{className:"space-y-4",children:d?e.jsx("p",{className:"text-slate-400 text-center py-4",children:"Loading feedback..."}):t.length>0?t.map(c=>e.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${n(c.rating)}`,children:c.rating}),e.jsxs("p",{className:"text-sm text-slate-400 mt-2",children:["Submitted on: ",p(c.submittedAt)]})]})}),c.comment&&e.jsx("p",{className:"mt-3 text-slate-300 bg-slate-900/40 p-3 rounded-md",children:c.comment})]},c.id)):e.jsx("p",{className:"text-slate-400 text-center py-4",children:"No feedback has been submitted yet."})})]})},Ae=()=>{const[t,s]=a.useState(null),[d,i]=a.useState(""),[n,p]=a.useState(""),[c,b]=a.useState(""),[v,N]=a.useState(""),[x,l]=a.useState(""),[f,h]=a.useState("");a.useEffect(()=>{(async()=>{const C=await Z();s(C)})()},[]);const j=y=>{const{name:C,value:k}=y.target;s(A=>A?{...A,[C]:k}:null)},m=async y=>{y.preventDefault(),t&&(await Q(t),i("Settings saved successfully!"),setTimeout(()=>{i(""),window.location.reload()},1500))},S=async y=>{y.preventDefault(),h(""),l("");const C=await ee();if(n!==C){h("Current password is incorrect.");return}if(c.length<6){h("New password must be at least 6 characters long.");return}if(c!==v){h("New passwords do not match.");return}await te(c),l("Password updated successfully!"),p(""),b(""),N(""),setTimeout(()=>l(""),3e3)};return t?e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700 space-y-8 animate-fadeIn",children:[e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),e.jsxs("div",{className:"bg-slate-700/50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"General Settings"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"appName",className:"block text-slate-300 mb-1",children:"App Name"}),e.jsx("input",{id:"appName",name:"appName",type:"text",value:t.appName,onChange:j,required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"contactEmail",className:"block text-slate-300 mb-1 mt-4",children:"Contact Email"}),e.jsx("input",{id:"contactEmail",name:"contactEmail",type:"email",value:t.contactEmail,onChange:j,required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"whatsappNumber",className:"block text-slate-300 mb-1 mt-4",children:"WhatsApp Booking Number"}),e.jsx("input",{id:"whatsappNumber",name:"whatsappNumber",type:"tel",value:t.whatsappNumber,onChange:j,required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[e.jsx("button",{type:"submit",className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:"Save General Settings"}),d&&e.jsx("p",{className:"text-green-400 text-sm",children:d})]})]})]}),e.jsx("form",{onSubmit:S,className:"space-y-4",children:e.jsxs("div",{className:"bg-slate-700/50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Security"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-slate-300 mb-1",children:"Current Password"}),e.jsx("input",{id:"currentPassword",type:"password",value:n,onChange:y=>p(y.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-slate-300 mb-1",children:"New Password"}),e.jsx("input",{id:"newPassword",type:"password",value:c,onChange:y=>b(y.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-slate-300 mb-1",children:"Confirm New Password"}),e.jsx("input",{id:"confirmPassword",type:"password",value:v,onChange:y=>N(y.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[e.jsx("button",{type:"submit",className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:"Update Password"}),x&&e.jsx("p",{className:"text-green-400 text-sm",children:x}),f&&e.jsx("p",{className:"text-red-400 text-sm",children:f})]})]})})]}):e.jsx("p",{children:"Loading settings..."})},De=()=>{const[t,s]=a.useState([]),[d,i]=a.useState(!0),[n,p]=a.useState(!1),[c,b]=a.useState(""),[v,N]=a.useState(""),[x,l]=a.useState(""),[f,h]=a.useState(""),[j,m]=a.useState(""),[S,y]=a.useState(""),[C,k]=a.useState("");a.useEffect(()=>{A()},[]);const A=async()=>{i(!0);const r=await O();s(r),i(!1)},P=()=>{b(""),N(""),l(""),h(""),m(""),y(""),k("")},E=()=>{P(),p(!0)},F=()=>{p(!1),P()},I=async(r,o)=>{window.confirm(`Are you sure you want to delete the clinician "${o}"?`)&&(await ae(r),A())},M=async r=>{if(r.preventDefault(),k(""),v.length<6){k("Password must be at least 6 characters long.");return}const o=await se({username:c,passwordHash:v,name:x,title:f,bio:j,imageUrl:S});o.success?(p(!1),P(),A()):k(o.message)};return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Clinician Management"}),!n&&e.jsx("button",{onClick:E,className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:"Add New Clinician"})]}),n?e.jsxs("form",{onSubmit:M,className:"space-y-4 bg-slate-700/50 p-6 rounded-lg",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Create New Clinician Account"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cl-name",className:"block text-slate-300 mb-1",children:"Full Name"}),e.jsx("input",{id:"cl-name",type:"text",value:x,onChange:r=>l(r.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cl-title",className:"block text-slate-300 mb-1",children:"Title (e.g., DPT)"}),e.jsx("input",{id:"cl-title",type:"text",value:f,onChange:r=>h(r.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cl-username",className:"block text-slate-300 mb-1",children:"Username (for login)"}),e.jsx("input",{id:"cl-username",type:"text",value:c,onChange:r=>b(r.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cl-password",className:"block text-slate-300 mb-1",children:"Password"}),e.jsx("input",{id:"cl-password",type:"password",value:v,onChange:r=>N(r.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cl-imageUrl",className:"block text-slate-300 mb-1",children:"Image URL"}),e.jsx("input",{id:"cl-imageUrl",type:"url",value:S,onChange:r=>y(r.target.value),required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none",placeholder:"https://i.pravatar.cc/150?u=unique-id"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cl-bio",className:"block text-slate-300 mb-1",children:"Bio"}),e.jsx("textarea",{id:"cl-bio",value:j,onChange:r=>m(r.target.value),rows:3,required:!0,className:"w-full bg-slate-700 rounded-lg p-2 focus:ring-2 focus:ring-cyan-500 outline-none"})]}),C&&e.jsx("p",{className:"text-red-400 text-sm",children:C}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx("button",{type:"submit",className:"bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400",children:"Save Clinician"}),e.jsx("button",{type:"button",onClick:F,className:"bg-slate-600 text-white px-4 py-2 rounded-lg hover:bg-slate-500",children:"Cancel"})]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-700/50 text-sm uppercase text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Name"}),e.jsx("th",{className:"p-3",children:"Username"}),e.jsx("th",{className:"p-3",children:"Password"}),e.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-6 text-slate-400",children:"Loading clinicians..."})}):t.length>0?t.map(r=>e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsxs("td",{className:"p-3 font-medium",children:[r.name," ",e.jsxs("span",{className:"text-xs text-slate-400",children:["(",r.title,")"]})]}),e.jsx("td",{className:"p-3 text-slate-400",children:r.username}),e.jsx("td",{className:"p-3 text-slate-400",children:r.passwordHash}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("button",{onClick:()=>I(r.id,r.name),className:"font-semibold text-red-400 hover:text-red-300",children:"Delete"})})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center p-6 text-slate-400",children:'No clinicians found. Click "Add New Clinician" to get started.'})})})]})})]})},Te=()=>{const[t,s]=a.useState([]),[d,i]=a.useState([]),[n,p]=a.useState(!0);a.useEffect(()=>{(async()=>{p(!0);const[l,f]=await Promise.all([oe(),O()]);s(l),i(f),p(!1)})()},[]);const c=async(x,l)=>{const f=t.map(h=>h.id===x?{...h,status:l}:h);s(f),await de(f)},b=x=>{var l;return((l=d.find(f=>f.id===x))==null?void 0:l.name)||"Unknown"},v=["Pending","Confirmed","Completed","Cancelled"],N=x=>{switch(x){case"Pending":return"bg-yellow-500/20 text-yellow-300";case"Confirmed":return"bg-blue-500/20 text-blue-300";case"Completed":return"bg-green-500/20 text-green-300";case"Cancelled":return"bg-red-500/20 text-red-300"}};return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Booking Management"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-700/50 text-sm uppercase text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Patient"}),e.jsx("th",{className:"p-3",children:"Clinician"}),e.jsx("th",{className:"p-3",children:"Date & Time"}),e.jsx("th",{className:"p-3",children:"Service"}),e.jsx("th",{className:"p-3 text-center",children:"Status"})]})}),e.jsx("tbody",{children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6 text-slate-400",children:"Loading bookings..."})}):t.length>0?t.map(x=>e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsxs("td",{className:"p-3",children:[e.jsx("p",{className:"font-medium",children:x.patientName}),e.jsx("p",{className:"text-xs text-slate-400",children:x.patientContact})]}),e.jsx("td",{className:"p-3 text-slate-300",children:b(x.clinicianId)}),e.jsxs("td",{className:"p-3 text-slate-400",children:[x.date," at ",x.time]}),e.jsx("td",{className:"p-3 text-slate-400",children:x.service}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("select",{value:x.status,onChange:l=>c(x.id,l.target.value),className:`text-xs font-semibold rounded-full py-1 px-2 border-2 bg-slate-800 focus:outline-none focus:ring-2 focus:ring-cyan-500 ${N(x.status)} border-transparent`,children:v.map(l=>e.jsx("option",{value:l,children:l},l))})})]},x.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6 text-slate-400",children:"No bookings found."})})})]})})]})},Fe=()=>{const[t,s]=a.useState([]),[d,i]=a.useState(!0),n=async()=>{i(!0);const c=le();s(c),i(!1)};a.useEffect(()=>{n()},[]);const p=async c=>{window.confirm(`Are you sure you want to delete the user "${c}"? This action cannot be undone.`)&&(await ne(c),n())};return e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"User (Patient) Management"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-700/50 text-sm uppercase text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Username"}),e.jsx("th",{className:"p-3",children:"Password"}),e.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center p-6 text-slate-400",children:"Loading users..."})}):t.length>0?t.map(c=>e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("td",{className:"p-3 font-medium",children:c.username}),e.jsx("td",{className:"p-3 text-slate-400",children:c.passwordHash}),e.jsx("td",{className:"p-3 text-right",children:e.jsx("button",{onClick:()=>p(c.username),className:"font-semibold text-red-400 hover:text-red-300",children:"Delete"})})]},c.username)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center p-6 text-slate-400",children:"No registered users found."})})})]})})]})},Ee=()=>{const[t,s]=a.useState([]),[d,i]=a.useState(!0),[n,p]=a.useState(!1);a.useEffect(()=>{(async()=>{i(!0);const f=await G();s(f.map(h=>({...h}))),i(!1)})()},[]);const c=async l=>{s(h=>h.map(j=>j.id===l?{...j,isAnalyzing:!0,suggestion:void 0}:j));const f=t.find(h=>h.id===l);if(!f||!f.content){console.error("Post not found or has no content"),s(h=>h.map(j=>j.id===l?{...j,isAnalyzing:!1}:j));return}try{const h=await H(f.content);s(j=>j.map(m=>m.id===l?{...m,isAnalyzing:!1,suggestion:h}:m))}catch(h){console.error("Error generating meta for post",l,h),alert(`Could not generate SEO data for "${f.title}". The AI service may be unavailable.`),s(j=>j.map(m=>m.id===l?{...m,isAnalyzing:!1}:m))}},b=async l=>{await c(l)},v=async()=>{p(!0);for(const l of t)await c(l.id);p(!1)},N=async l=>{const f=t.find(m=>m.id===l);if(!f||!f.suggestion)return;s(m=>m.map(S=>S.id===l?{...S,isApplying:!0}:S));const h=t.map(m=>m.id===l&&m.suggestion?{...m,metaDescription:m.suggestion.description,metaKeywords:m.suggestion.keywords,suggestion:void 0}:m),j=h.map(({suggestion:m,isAnalyzing:S,isApplying:y,...C})=>C);await V(j),s(h.map(m=>({...m,isApplying:!1})))},x=({title:l,description:f,keywords:h})=>e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-slate-300",children:"Title:"})," ",l||"(Not set)"]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-slate-300",children:"Description:"})," ",f||"(Not set)"]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-slate-300",children:"Keywords:"})," ",h||"(Not set)"]})]});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Blog SEO Analysis"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Use AI to generate and improve SEO metadata for your blog posts."})]}),e.jsxs("button",{onClick:v,disabled:n||d,className:"flex items-center justify-center gap-2 bg-cyan-500 text-white px-4 py-2 rounded-lg hover:bg-cyan-400 disabled:bg-slate-600 transition-colors",children:[e.jsx(B,{className:`h-5 w-5 ${n?"animate-spin":""}`}),n?"Analyzing All...":"Analyze All Posts"]})]}),d?e.jsx("div",{className:"text-center py-8",children:e.jsx(z,{})}):e.jsx("div",{className:"space-y-6",children:t.map(l=>e.jsxs("div",{className:"bg-slate-700/50 p-6 rounded-lg border border-slate-600",children:[e.jsx("h2",{className:"text-lg font-bold text-cyan-400 mb-4",children:l.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Current SEO"}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded",children:e.jsx(x,{title:l.metaTitle,description:l.metaDescription,keywords:l.metaKeywords})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"font-semibold text-white",children:"AI Suggestion"}),e.jsxs("button",{onClick:()=>b(l.id),disabled:l.isAnalyzing||n,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300 disabled:opacity-50",children:[e.jsx(B,{className:`h-4 w-4 ${l.isAnalyzing?"animate-spin":""}`}),l.isAnalyzing?"Generating...":"Regenerate"]})]}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded min-h-[116px] flex flex-col justify-center",children:l.isAnalyzing?e.jsx(z,{}):l.suggestion?e.jsxs(e.Fragment,{children:[e.jsx(x,{title:l.metaTitle||l.title,description:l.suggestion.description,keywords:l.suggestion.keywords}),e.jsx("button",{onClick:()=>N(l.id),disabled:l.isApplying,className:"mt-4 w-full bg-cyan-600 text-white px-3 py-1.5 text-sm rounded-lg hover:bg-cyan-500 disabled:bg-slate-600",children:l.isApplying?"Applying...":"Apply Suggestions"})]}):e.jsx("p",{className:"text-slate-400 text-sm text-center",children:'Click "Regenerate" to get AI suggestions.'})})]})]})]},l.id))})]})})},Ke=({onLogout:t})=>{const[s,d]=a.useState("activity"),i=()=>{switch(s){case"activity":return e.jsx(pe,{});case"clinicians":return e.jsx(De,{});case"users":return e.jsx(Fe,{});case"bookings":return e.jsx(Te,{});case"blog":return e.jsx(be,{});case"telehealth":return e.jsx(fe,{});case"plans":return e.jsx(ye,{});case"workshops":return e.jsx(Se,{});case"feedback":return e.jsx(Pe,{});case"settings":return e.jsx(Ae,{});case"seo":return e.jsx(Ee,{});default:return null}},n=({tab:p,label:c})=>e.jsx("button",{onClick:()=>d(p),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${s===p?"bg-cyan-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:c});return e.jsx("div",{className:"min-h-screen bg-slate-900 text-slate-100 p-4 md:p-8",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-4 md:mb-0",children:"Admin Panel"}),e.jsx("button",{onClick:t,className:"bg-slate-700 text-slate-200 px-4 py-2 rounded-lg hover:bg-slate-600 transition-colors",children:"Logout"})]}),e.jsxs("nav",{className:"flex flex-wrap gap-2 md:space-x-4 mb-8 border-b border-slate-700 pb-4",children:[e.jsx(n,{tab:"activity",label:"Activity"}),e.jsx(n,{tab:"clinicians",label:"Clinicians"}),e.jsx(n,{tab:"users",label:"Users"}),e.jsx(n,{tab:"bookings",label:"Bookings"}),e.jsx(n,{tab:"blog",label:"Blog"}),e.jsx(n,{tab:"seo",label:"SEO Analysis"}),e.jsx(n,{tab:"telehealth",label:"Telehealth"}),e.jsx(n,{tab:"plans",label:"Treatment Plans"}),e.jsx(n,{tab:"workshops",label:"Workshops"}),e.jsx(n,{tab:"feedback",label:"Feedback"}),e.jsx(n,{tab:"settings",label:"Settings"})]}),e.jsx("main",{children:i()})]})})};export{Ke as default};
