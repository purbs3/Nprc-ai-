import{r as a,j as e,g as w}from"./index-DIzydVhA.js";import{b as T,f as C,h as P,i as L}from"./forumService-26YnwC0u.js";import{R}from"./RichTextEditor-BrE2tSya.js";import{L as k}from"./LoadingSpinner-BQulzYF6.js";const _=({categorySlug:c,topicId:d,onNavigate:r})=>{const[o,j]=a.useState(null),[s,y]=a.useState(null),[x,m]=a.useState([]),[N,u]=a.useState(!0),[l,h]=a.useState(""),[p,b]=a.useState(!1);a.useEffect(()=>{(async()=>{u(!0);const i=await w(),v=await T(c),n=await C(d);if(j(v||null),y(n||null),n){const S=await P(n.id);m(S),document.title=`${n.title} - ${i.appName} Forum`}u(!1)})()},[c,d]);const g=async t=>{if(t.preventDefault(),!l.trim()||!s)return;b(!0);const i=await L({topicId:s.id,content:l,authorName:"Dr. Tarique Akhtar",authorTitle:"Senior Physiotherapist, MSc"});m([...x,i]),h(""),b(!1)},f=t=>new Date(t).toLocaleString("en-US",{dateStyle:"medium",timeStyle:"short"});return N?e.jsx("div",{className:"text-center py-24",children:e.jsx(k,{})}):!s||!o?e.jsx("div",{className:"text-center py-24 text-slate-400",children:"Topic not found."}):e.jsx("section",{id:"topic-page",className:"py-24 bg-slate-900 animate-fadeIn",children:e.jsxs("div",{className:"container mx-auto px-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-8 text-sm text-slate-400",children:[e.jsx("button",{onClick:()=>r("/"),className:"hover:text-cyan-400",children:"Home"}),e.jsx("span",{className:"mx-2",children:">"}),e.jsx("button",{onClick:()=>r("/community"),className:"hover:text-cyan-400",children:"Community"}),e.jsx("span",{className:"mx-2",children:">"}),e.jsx("button",{onClick:()=>r(`/community/${o.slug}`),className:"hover:text-cyan-400",children:o.name})]}),e.jsx("header",{className:"mb-8",children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold !text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500",children:s.title})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-700 flex items-center justify-center font-bold text-xl text-cyan-400 mx-auto",children:s.authorName.charAt(0)}),e.jsx("p",{className:"font-bold text-white mt-2 text-sm",children:s.authorName}),e.jsx("p",{className:"text-slate-400 text-xs",children:s.authorTitle})]}),e.jsxs("div",{className:"flex-1 bg-slate-800 p-6 rounded-xl border border-cyan-500/30",children:[e.jsxs("p",{className:"text-xs text-slate-400 mb-4",children:["Posted on ",f(s.createdAt)]}),e.jsx("div",{className:"prose prose-slate prose-invert",dangerouslySetInnerHTML:{__html:s.content}})]})]}),x.map(t=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-700 flex items-center justify-center font-bold text-xl text-white mx-auto",children:t.authorName.charAt(0)}),e.jsx("p",{className:"font-bold text-white mt-2 text-sm",children:t.authorName}),e.jsx("p",{className:"text-slate-400 text-xs",children:t.authorTitle})]}),e.jsxs("div",{className:"flex-1 bg-slate-800/70 p-6 rounded-xl border border-slate-700",children:[e.jsxs("p",{className:"text-xs text-slate-400 mb-4",children:["Posted on ",f(t.createdAt)]}),e.jsx("div",{className:"prose prose-slate prose-invert",dangerouslySetInnerHTML:{__html:t.content}})]})]},t.id))]}),e.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Post a Reply"}),e.jsxs("form",{onSubmit:g,className:"space-y-4 bg-slate-800 p-6 rounded-xl border border-slate-700",children:[e.jsx("div",{children:e.jsx(R,{value:l,onChange:h})}),e.jsx("button",{type:"submit",disabled:p||!l.trim(),className:"bg-cyan-500 text-white px-5 py-2.5 rounded-lg hover:bg-cyan-400 transition-colors font-semibold disabled:bg-slate-600 disabled:cursor-not-allowed",children:p?"Submitting...":"Submit Reply"})]})]})]})})};export{_ as default};
