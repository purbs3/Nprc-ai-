const r="nprc-help-tickets",l=()=>[{id:"ht1",userId:"sarahj",userType:"user",subject:"Trouble with exercise recommendations",message:"Hi, the app keeps suggesting the same knee exercise even after I marked it as completed. Can you help?",status:"Open",createdAt:new Date(Date.now()-1728e5).toISOString(),replies:[]},{id:"ht2",userId:"purab",userType:"clinician",subject:"Posture Analysis Results",message:"The last posture analysis I ran for a patient seemed to have a processing error. The report was incomplete.",status:"In Progress",createdAt:new Date(Date.now()-864e5).toISOString(),replies:[{id:"htr1",authorName:"Admin",authorType:"Admin",message:"Hi Dr. Purab, thanks for reaching out. We're looking into the issue with the analysis service and will get back to you shortly.",createdAt:new Date(Date.now()-432e5).toISOString()}]}],u=async(t,s)=>{await new Promise(e=>setTimeout(e,100));try{const e=localStorage.getItem(t);if(e){const a=JSON.parse(e);if(Array.isArray(a))return a}}catch(e){console.error(`Failed to load ${t} from localStorage:`,e)}return await o(t,s),s},o=async(t,s)=>{await new Promise(e=>setTimeout(e,100));try{localStorage.setItem(t,JSON.stringify(s))}catch(e){console.error(`Failed to save ${t} to localStorage:`,e)}},n=async()=>u(r,l()),d=async t=>(await n()).filter(e=>e.userId.toLowerCase()===t.toLowerCase()),g=async t=>{const s=await n(),e={...t,id:Date.now().toString(),createdAt:new Date().toISOString(),status:"Open",replies:[]};return await o(r,[e,...s]),e},p=async(t,s)=>{const e=await n(),a=e.findIndex(c=>c.id===t);if(a===-1)return null;const i={...s,id:`r-${Date.now()}`,createdAt:new Date().toISOString()};return e[a].replies.push(i),s.authorType==="Admin"&&e[a].status==="Open"&&(e[a].status="In Progress"),await o(r,e),e[a]};export{g as a,n as b,p as c,d as g};
